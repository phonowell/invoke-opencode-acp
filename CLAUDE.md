# invoke-opencode-acp

Claude Code skill Â· å§”æ‰˜å¤æ‚ä»»åŠ¡è‡³ OpenCode å­ä»£ç† Â· èŠ‚çœ 50-90% token

## å…³é”®çº¦æŸ

**ç²¾ç®€å†—ä½™**ï¼šæœºå™¨å¯è¯» > äººç±»å¯è¯» Â· ç¬¦å·/ç¼©å†™/åˆ—è¡¨ Â· åˆ åŠ©è¯
**å†²çªä¿¡ä»£ç **ï¼šä»£ç ä¸ºçœŸ Â· æ–‡æ¡£æè¿°ä¸å®ç°å†²çªæ—¶ä¿¡ä»£ç 
**å®¢è§‚è¯šå®**ï¼šä¸ä¸»è§‚è¯„ä»· Â· ä¸å› ç”¨æˆ·æƒ…ç»ªè½¬ç§»ç«‹åœº Â· ä¸ç¼–é€ äº‹å® Â· ç«‹åˆ»æš´éœ²ä¸ç¡®å®šä¿¡æ¯
**è§¦å‘æ¡ä»¶**ï¼šâ‰¥2 æ–‡ä»¶ä¿®æ”¹ Â· é‡æ„ Â· æ‰¹é‡æ“ä½œ Â· ä»£ç å®¡æŸ¥ Â· å¤šæ­¥æ¨ç† Â· git æ“ä½œ
**é¿å…**ï¼šå•æ–‡ä»¶å¿«é€Ÿç¼–è¾‘ Â· é€’å½’è°ƒç”¨ OpenCode
**Token æœºåˆ¶**ï¼šå§”æ‰˜è‡³ OpenCode â†’ ä½¿ç”¨æ›¿ä»£æ¨¡å‹ï¼ˆGLM-4.7/Qwenï¼‰â†’ ä»…æ‘˜è¦å…¥ä¸»å¯¹è¯ Â· Tradeoff: èƒ½åŠ›ä¸‹é™
**TodoWrite**ï¼šâ‰¥3 æ­¥éª¤ä»»åŠ¡å¿…é¡»å»º todo Â· å®æ—¶æ›´æ–°çŠ¶æ€ Â· å®Œæˆç«‹å³æ ‡è®°
**å­ä»»åŠ¡æ¨¡å‹**ï¼šTask å·¥å…·å¯ç”¨ `model: "haiku"` èŠ‚çœæˆæœ¬ï¼ˆç®€å•ä»»åŠ¡ï¼‰

## Skill ä½¿ç”¨

è°ƒç”¨åå¿…é¡»ç­‰å¾…å®Œæˆå†æ‰§è¡Œå…¶ä»–æ“ä½œ Â· é¿å…ç«‹å³è‡ªè¡Œå®ç°

## æŠ€æœ¯æ ˆ

Claude Code CLI Â· OpenCode CLIï¼ˆ`npm install -g opencode`ï¼‰Â· Node.js

## æ ¸å¿ƒå‘½ä»¤

äº¤äº’å¼ï¼ˆ>30mï¼‰ï¼š
```bash
node ~/.claude/skills/invoke-opencode-acp/acp_client.cjs "$PWD" "ä»»åŠ¡æè¿°" -o /tmp/output.txt
```
ä¸€æ¬¡æ€§ï¼ˆ<30mï¼‰ï¼š
```bash
node ~/.claude/skills/invoke-opencode-acp/acp_client.cjs "$PWD" "ä»»åŠ¡æè¿°" -o /tmp/output.txt -t 300
```
å‚æ•°ï¼š`-o FILE` å¿…éœ€ Â· `-t SECONDS` é»˜è®¤ 1800 Â· `-v` è¯¦ç»†æ¨¡å¼â†’stderr

## å·¥ä½œæµ

**äº¤äº’å¼æ£€æŸ¥å¾ªç¯**ï¼š
1. `Bash(..., run_in_background=True)` â†’ task_id
2. `TaskOutput(task_id, block=True, timeout=300000)` â†’ ç­‰å¾… 5 åˆ†é’Ÿ
3. `completed` â†’ Read è¾“å‡ºæ–‡ä»¶ â†’ è¿”å›ç»“æœ
4. `running` â†’ `AskUserQuestion` æ˜¯å¦ç»§ç»­ â†’ ç»§ç»­åˆ™å›åˆ° 2
5. ç»ˆæ­¢ â†’ `KillShell(task_id)` è‡ªåŠ¨æ¸…ç†

## ç›®å½•ç»“æ„

```
skills/invoke-opencode-acp/
  SKILL.md
  acp_client.cjs
tests/
  test_acp_client.js
```

## ä»£ç è§„èŒƒ

â‰¥5 å¤„éç©ºæ–­è¨€ç«‹å³é‡æ„ç±»å‹æ¶æ„ï¼ˆğŸš« eslint-disable æ‰¹é‡å‹åˆ¶ï¼‰

## è¾“å‡ºæ ¼å¼

ç¦é¢„å‘Šæ–‡å­— Â· çŠ¶æ€ç”¨ç¬¦å· âœ“/âœ—/â†’ Â· ä¸€æ¬¡æ€§æ‰¹é‡ Edit Â· æ•°æ®ä¼˜å…ˆ Â· ç›´è¾¾ç»“è®º Â· å·¥å…·é—´éš”é›¶è¾“å‡º Â· é”™è¯¯æ ¼å¼ âœ— {ä½ç½®}:{ç±»å‹} Â· ä»£ç å—é›¶æ³¨é‡Š Â· â‰¥2 æ¡ç”¨åˆ—è¡¨ Â· è·¯å¾„ç¼©å†™ï¼ˆ. é¡¹ç›®æ ¹ Â· ~ ä¸»ç›®å½•ï¼‰Â· ç¦æ€»ç»“æ€§é‡å¤ Â· è¿›åº¦ {å½“å‰}/{æ€»æ•°} Â· æé—®ç›´å…¥
